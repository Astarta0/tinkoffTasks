/**
 * Task 1
 * https://github.com/Astarta0/tinkoffTasks/tree/master/task1
 *
 * Ð”ÐµÐ¼Ð¾ Ð½Ð° codepen:
 *   https://codepen.io/astarta0/pen/wjxrLV
 *
 * Ð—Ð°Ð´Ð°Ñ‡Ð°:
 *   Ð¤Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´ÐµÑ€ Ð´Ð¾Ð±Ð°Ð²Ð¸Ð»Ð° Ð² Ñ‡Ð°Ñ‚ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸ Ð²Ð¸Ð´Ð¶ÐµÑ‚ emoji Ð¸ Ð¾Ñ‚Ð´Ð°Ð»Ð° Ð² Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ.
 *   Â«Ð£ Ð¼ÐµÐ½Ñ Ð¾Ð´Ð½Ð¸ ÐºÐ²Ð°Ð´Ñ€Ð°Ñ‚Ñ‹Â», â€” ÑÐ¾Ð¾Ð±Ñ‰Ð¸Ð» Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ñ‰Ð¸Ðº Ñ Linux. Â«ÐœÐ¾Ð¶ÐµÑ‚, Ñ†Ð²ÐµÑ‚Ð½Ñ‹Ð¼Ð¸ Ð¸Ñ…
 *   ÑÐ´ÐµÐ»Ð°ÐµÐ¼?Â» â€” ÑÐ¿Ñ€Ð¾ÑÐ¸Ð» Ñ‚ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³ c Windows 7.
 *   ÐŸÐ¾Ð¼Ð¾Ð³Ð¸Ñ‚Ðµ Ð´Ð¾Ð´ÐµÐ»Ð°Ñ‚ÑŒ Ð²Ð¸Ð´Ð¶ÐµÑ‚ â€” Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ñ‚Ðµ Ñ†Ð²ÐµÑ‚Ð½Ñ‹Ðµ emoji Ð´Ð»Ñ Ð²ÑÐµÑ… Ð¿Ð¾Ð¿ÑƒÐ»ÑÑ€Ð½Ñ‹Ñ… Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ð¾Ð²,
 *   ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÑ Ð½Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ðµ Ð¸ÐºÐ¾Ð½ÐºÐ¸ Â«Ð¿Ð¾Ð´ ÐºÐ°Ð¿Ð¾Ñ‚Ð¾Ð¼Â». ÐÐ°Ð²ÐµÑ€Ð½ÑÐºÐ° Ð¿Ñ€Ð¸Ð´ÐµÑ‚ÑÑ Ð¿Ñ€Ð¸Ð±ÐµÐ³Ð½ÑƒÑ‚ÑŒ Ðº Ð¿Ð¾Ð¼Ð¾Ñ‰Ð¸ ÑÑ‚Ð¾Ñ€Ð¾Ð½Ð½Ð¸Ñ…
 *   Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐº, Ð½Ð¾ Ð²ÑÐµ Ð¾Ð½Ð¸ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‚ Ð¼ÐµÐ´Ð»ÐµÐ½Ð½ÐµÐµ Ð½Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ñ… ÑÐ¼Ð°Ð¹Ð»Ð¾Ð². ÐŸÑ€Ð¸Ð´ÐµÑ‚ÑÑ Ð¸ÑÑ…Ð¸Ñ‚Ñ€Ð¸Ñ‚ÑŒÑÑ,
 *   Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð½Ðµ Ð¸ÑÐ¿Ð¾Ñ€Ñ‚Ð¸Ñ‚ÑŒ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð°Ð¼ Ð²Ð¿ÐµÑ‡Ð°Ñ‚Ð»ÐµÐ½Ð¸Ðµ Ð´Ð»Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¼Ð¸ Ð¿Ñ€Ð¾ÐºÑ€ÑƒÑ‚ÐºÐ°Ð¼Ð¸ Ð¸Ð»Ð¸ ÑÐºÐ°Ñ‡Ð¸Ð²Ð°Ð½Ð¸ÐµÐ¼
 *   Ð²ÑÐµÐ³Ð¾ Ð±Ð°Ð½Ð´Ð»Ð° ÐºÐ°Ñ€Ñ‚Ð¸Ð½Ð¾Ðº Ð¿Ñ€Ð¸ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ð¸Ð¸ Ð²Ð¸Ð´Ð¶ÐµÑ‚Ð° Ñ emoji.
 *
 *  ÐšÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¸ Ðº Ñ€ÐµÑˆÐµÐ½Ð¸ÑŽ:
 *    1) Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ð»Ð° Ð¿Ð¾Ð»Ð¸Ñ„Ð¸Ð» Ð´Ð»Ñ codePointAt, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ UTF-16 ÐºÐ¾Ð´ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°
 *    2) Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° ÑÐ¼Ð¾Ð´Ð¶Ð¸ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÑ‚ÑÑ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ð¾Ð¹ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÐµÐ¹ (Ð²Ð·ÑÑ‚Ð¾ Ð¸Ð· Modernizr Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸)
 *    3) ÐºÐ°Ñ€Ñ‚Ð¸Ð½ÐºÐ¸ Ð´Ð»Ñ ÑÐ¼Ð¾Ð´Ð¶Ð¸ (Ð² ÑÐ»ÑƒÑ‡Ð°Ðµ Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²Ð¸Ñ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸) Ð±ÐµÑ€ÑƒÑ‚ÑÑ Ñ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ð¾Ð³Ð¾ cdn
 *
 *  ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ:
 *    1) hasEmojiSupport() Ð½Ðµ ÑÐ¾Ð²ÑÐµÐ¼ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÑ‚ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÑƒ ÑÐ¼Ð¾Ð´Ð¶Ð¸ Ð¿Ñ€Ð¸ Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ð¸ Ð¼Ð°ÑÑˆÑ‚Ð°Ð±Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ
 *       Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ; Ð´ÑƒÐ¼Ð°ÑŽ ÑÑ‚Ð¾ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ Ð½ÐµÐ¼Ð½Ð¾Ð³Ð¾ Ð¸Ð·Ð¼ÐµÐ½Ð¸Ð² Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ, Ð²Ð·ÑÐ² Ð´Ñ€ÑƒÐ³Ð¸Ðµ ÐºÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ñ‹ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸
 */

const picker = document.querySelector('.emoji-picker');
const message = document.querySelector('.message');
const checkStatus = hasEmojiSupport();

const EMOJI_DATA = [
    {
        title: 'Ð›ÑŽÐ´Ð¸',
        icons: ['ðŸ˜ƒ', 'ðŸ˜', 'ðŸ˜…', 'ðŸ˜‡', 'ðŸ˜', 'ðŸ¤¡', 'ðŸ¤ ', 'ðŸ˜Ž', 'ðŸ˜¡', 'ðŸ˜¨', 'ðŸ˜­']
    },
    {
        title: 'ÐšÐ¾Ñ‚Ð¸ÐºÐ¸',
        icons: ['ðŸ˜º', 'ðŸ˜¸', 'ðŸ˜¹', 'ðŸ˜»', 'ðŸ˜¼', 'ðŸ˜½', 'ðŸ™€', 'ðŸ˜¿', 'ðŸ˜¾']
    },
    {
        title: 'Ð–ÐµÑÑ‚Ñ‹',
        icons: ['ðŸ‘', 'ðŸ‘Ž', 'ðŸ‘Š', 'âœŠ', 'âœŒï¸', 'ðŸ¤˜']
    }
];

function addIcon(icon) {
    if (!checkStatus) {
        message.innerHTML += `${getEmojiImg(icon)}`;
    } else {
        message.innerHTML += icon;
    }
}

function renderEmojiList(icons) {
    if (!checkStatus) {
        return icons.map(icon => {
            return `
                <li onclick="addIcon('${icon}')">
                   ${getEmojiImg(icon)}
                </li>
            `;
        }).join('');
    } else {
        return icons.map(icon =>
            `<li onclick="addIcon('${icon}')">${icon}</li>`
        ).join('');
    }
}

function renderIconsGroup(group) {
    return `
        <section>
          <h2>${group.title}</h2>
          <ul>
            ${renderEmojiList(group.icons)}
          </ul>
        </section>
    `;
}

function renderIcons(emojiData) {
    return emojiData.map(group => renderIconsGroup(group)).join('');
}


function getEmojiImg(icon) {
    let codeIconHex = icon.codePointAt(0).toString(16)
    return `
        <img class="emoji-img"
        src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/${codeIconHex}.png"
        >
    `;
}

picker.innerHTML = renderIcons(EMOJI_DATA);